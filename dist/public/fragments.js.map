{"version":3,"sources":["../../public/fragments.js"],"names":["form","$","list","getApiUrl","id","localStorage","getItem","addClass","submit","find","val","name","description","data","req","ajax","url","method","dataType","post","done","removeAttr","end","loadFragments","get","then","resp","html","map","item","_id","formatText","join"],"mappings":"AAAA;;;AAGA;;AAEA,IAAIA,OAAOC,GAAX;AACA,IAAIC,OAAOD,GAAX;;AAEA,SAASE,SAAT,CAAmBC,EAAnB,EAAuB;AACtB,QAAO,8BAA8BA,EAA9B,IAAoC,EAApC,GAAyC,MAAMA,EAA/C,GAAoD,EAA3D;AACA;;AAEDH,EAAE,YAAY;AACb,KAAII,aAAaC,OAAb,CAAqB,QAArB,CAAJ,EAAoC;AACnCL,IAAE,MAAF,EAAUM,QAAV,CAAmB,UAAnB;AACA;;AAEDP,QAAOC,EAAE,SAAF,CAAP;AACAC,QAAOD,EAAE,iBAAF,CAAP;;AAEAD,MAAKQ,MAAL,CAAY,YAAY;AACvB,MAAIJ,KAAKH,EAAE,IAAF,EAAQQ,IAAR,CAAa,aAAb,EAA4BC,GAA5B,EAAT;AACA,MAAIC,OAAOV,EAAE,IAAF,EAAQQ,IAAR,CAAa,eAAb,EAA8BC,GAA9B,EAAX;AACA,MAAIE,cAAcX,EAAE,IAAF,EAAQQ,IAAR,CAAa,sBAAb,EAAqCC,GAArC,EAAlB;;AAEA,MAAIG,OAAO;AACVF,SAAMA,IADI;AAEVC,gBAAaA;AAFH,GAAX;;AAKA,MAAIE,MAAM,KAAK,CAAf;AACA,MAAIV,OAAO,EAAX,EAAe;AACdU,SAAMb,EAAEc,IAAF,CAAO;AACZC,SAAK,+BAA+BZ,EADxB;AAEZS,UAAMA,IAFM;AAGZI,YAAQ,KAHI;AAIZC,cAAU;AAJE,IAAP,CAAN;AAMA,GAPD,MAOO;AACNJ,SAAMb,EAAEkB,IAAF,CAAO,2BAAP,EAAoCN,IAApC,CAAN;AACA;AACDC,MAAIM,IAAJ,CAAS,YAAY;AACpBpB,QAAKS,IAAL,CAAU,mBAAV,EAA+BY,UAA/B,CAA0C,SAA1C,EAAqDC,GAArD,GAA2Db,IAA3D,CAAgE,kCAAhE,EAAoGC,GAApG,CAAwG,EAAxG;AACAa;AACA,GAHD;AAIA,SAAO,KAAP;AACA,EA1BD;AA4BA,CApCD;;AAsCA,SAASA,aAAT,GAAyB;AACxBtB,GAAEuB,GAAF,CAAMrB,WAAN,EAAmBsB,IAAnB,CAAwB,UAASC,IAAT,EAAe;AACtCxB,OAAKyB,IAAL,CAAUD,KAAKE,GAAL,CAAS,UAASC,IAAT,EAAe;AACjC,UAAO,qCAAqCA,KAAKC,GAA1C,GAAgD,IAAhD,GAAuD,uBAAvD,GAAiF,iCAAjF;AACL;AACD,WAFM,GAEK,qBAFL,GAE6BD,KAAK,MAAL,CAF7B,GAE6C,QAF7C,GAGN,OAHM,GAGIE,WAAWF,KAAK,aAAL,CAAX,CAHJ,GAGsC,QAHtC,GAGiD,QAHxD;AAIA,GALS,EAKPG,IALO,CAKF,OALE,CAAV;AAMA,EAPD;AAQA","file":"fragments.js","sourcesContent":["/**\n * Created by KPblCEHblLLl on 20.11.2017.\n */\n\"use strict\";\n\nvar form = $();\nvar list = $();\n\nfunction getApiUrl(id) {\n\treturn \"/api/fragment-description\" + id != \"\" ? \"/\" + id : \"\";\n}\n\n$(function () {\n\tif (localStorage.getItem('editor')) {\n\t\t$(\"body\").addClass(\"editable\");\n\t}\n\n\tform = $(\"#editor\");\n\tlist = $(\"#fragments-list\");\n\n\tform.submit(function () {\n\t\tvar id = $(this).find(\"[name='id']\").val();\n\t\tvar name = $(this).find(\"[name='name']\").val();\n\t\tvar description = $(this).find(\"[name='description']\").val();\n\n\t\tvar data = {\n\t\t\tname: name,\n\t\t\tdescription: description,\n\t\t};\n\n\t\tvar req = void 0;\n\t\tif (id !== \"\") {\n\t\t\treq = $.ajax({\n\t\t\t\turl: \"/api/fragment-description/\" + id,\n\t\t\t\tdata: data,\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\tdataType: \"json\"\n\t\t\t});\n\t\t} else {\n\t\t\treq = $.post(\"/api/fragment-description\", data);\n\t\t}\n\t\treq.done(function () {\n\t\t\tform.find(':radio, :checkbox').removeAttr('checked').end().find('textarea, :text, :hidden, select').val('');\n\t\t\tloadFragments();\n\t\t});\n\t\treturn false;\n\t});\n\n});\n\nfunction loadFragments() {\n\t$.get(getApiUrl()).then(function(resp) {\n\t\tlist.html(resp.map(function(item) {\n\t\t\treturn \"<div class='list-item' data-id='\" + item._id + \"'>\" + \"<div class='buttons'>\" + \"<div class='button edit'></div>\" +\n\t\t\t\t\t// \"<div class='button delete'></div>\" +\n\t\t\t\t\"</div>\" + \"<div class='title'>\" + item[\"name\"]  + \"</div>\" +\n\t\t\t\t\"<div>\" + formatText(item[\"description\"]) + \"</div>\" + \"</div>\";\n\t\t}).join(\"<hr/>\"));\n\t});\n}\n\n"]}